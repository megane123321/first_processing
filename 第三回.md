# 初めてのprocessing 第三回 関数を作る
processingでは関数を自作することができる。
[図1](#図1)に示す通り、書き方はsetupなどと同じである。つまりsetup等の決まった時点で動作するプログラムの塊の真相は、processingが決められたときに決まった関数を呼び出していたのに過ぎないのである。  
そのためこれからはsetupやkeyPressed等も関数と呼称することとする。

<div id="図1"></div>

```java
void setup(){//processingに呼び出される
  myFunc();//自作関数の呼び出し
}

void myFunc(){//関数作成
  println("自作関数が実行された。");
}
```
図1. 関数を自作する

関数の宣言は、以下の要素から成り立つ。
* 戻り値の型
* 関数名
* 引数
* 処理

`戻り値の型 関数名(引数の型 引数名){処理}`という形で記述する。
引数はコンマ区切りで書くことでいくらでも増やすことができる。  
戻り値は`return 式`で返すことができる。

<div id="図2"></div>

```java
void setup(){
  println(sum(2,3));//2+3の計算
}

int sum(int a,int b){
  return a+b;//引数は変数と同様に扱うことができる
}
```
図2. 引数a,bを加算するsum関数

<div id="図3"></div>

```java
void setup(){
  for (int i=1;i<=40;i++){
    myFunc(i);
  }
}

void myFunc(int n){
  if (in3(n)){
    println(String.format("これは%1$d",n));
    return;//関数を終了
  }
  println(String.format("入力は%1$d",n));
}

boolean in3(int n){//3の倍数 or 3のつく数字か?
  if (n%3==0){
    return true;//関数を終了
  }
  while(n>0){
    if (n%10==3){
      return true;//関数を終了
    }
    n/=10;
  }
  return false;//関数を終了
}
```
図3. return文が実行された時点で関数は終了

返り値の型が指定されている場合、必ずreturn文を用いて返り値を返さなければならない。

## おまけ(可変長引数)
processingでは<u>**最後の引数のみ**</u>`型... 変数名`とすることで受け取る値の数を変えることのできる関数を作ることができる。

<div id="図4"></div>

```java
int allSum(int... nums){
  int sum=0;
  for(int i:nums){
    sum+=i;
  }
  return sum;
}
```
図4. 複数の値を加算し、返す関数

渡された引数は配列としてふるまうため、以下に示す[図5](#図5)と[図6](#図6)は等価である。

<div id="図5"></div>

```java
void setup(){
  println(allSum(10,20,30,40,50));
}

int allSum(int... nums){
  int sum=0;
  for(int i:nums){
    sum+=i;
  }
  return sum;
}
```
図5. 可変長引数の場合

<div id="図6"></div>

```java
void setup(){
  println(allSum(new int[]{10,20,30,40,50}));
}

int allSum(int[] nums){
  int sum=0;
  for(int i:nums){
    sum+=i;
  }
  return sum;
}
```
図6. 配列の場合

また、可変長引数には直に配列を渡すこともできるため、[図5](#図5)と[図6](#図6)と[図7](#図7)は等価である。

<div id="図7"></div>

```java
void setup(){
  println(allSum(new int[]{10,20,30,40,50}));
}

int allSum(int... nums){
  int sum=0;
  for(int i:nums){
    sum+=i;
  }
  return sum;
}
```
図7. 可変長引数に配列を渡す

## おまけ(再帰関数)
